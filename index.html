// Constants
const API_ENDPOINT = 'api/moods';
const ERROR_MESSAGE = 'Error: ';

// Function to render songs
function renderSongs(data) {
    if (!data || !data.songs) return;

    resultsDiv.innerHTML = '';
    data.songs.forEach(song => {
        const clone = songTemplate.content.cloneNode(true);
        clone.querySelector('h2').textContent = song.title;
        clone.querySelector('p').textContent = song.artist;
        resultsDiv.appendChild(clone);
    });
}

// Function to fetch songs
async function fetchSongs(mood) {
    try {
        const response = await fetch(`${API_ENDPOINT}/${mood}`);
        if (!response.ok) {
            throw new Error(`${ERROR_MESSAGE}status: ${response.status}`);
        }
        const data = await response.json();
        if (!data.songs) {
            throw new Error('Invalid response data');
        }
        return data;
    } catch (error) {
        console.error(error);
        return null;
    }
}

// Event listeners
showSongsButton.addEventListener('click', async () => {
    const selectedMood = moodSelect.value;
    const data = await fetchSongs(selectedMood);
    renderSongs(data);
});

moodSelect.addEventListener('change', async () => {
    const selectedMood = moodSelect.value;
    const data = await fetchSongs(selectedMood);
    renderSongs(data);
});